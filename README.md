# ðŸ‹ï¸ AI-Powered Fitness & Nutrition Assistant

Full-stack RAG-enabled fitness coach built with Next.js, AWS Amplify Gen 2, and Pinecone vector database.

## ðŸ—ºï¸ Detailed Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                ðŸŒ FRONTEND (Next.js 14)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Profile   â”‚  â”‚  Workouts   â”‚  â”‚    Meals    â”‚  â”‚   AI Chat   â”‚  â”‚ Analytics   â”‚ â”‚
â”‚  â”‚    Page     â”‚  â”‚    Page     â”‚  â”‚    Page     â”‚  â”‚    Page     â”‚  â”‚    Page     â”‚ â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚ â”‚
â”‚  â”‚ â€¢ Form      â”‚  â”‚ â€¢ Log Form  â”‚  â”‚ â€¢ Log Form  â”‚  â”‚ â€¢ Chat UI   â”‚  â”‚ â€¢ Charts    â”‚ â”‚
â”‚  â”‚ â€¢ Save      â”‚  â”‚ â€¢ History   â”‚  â”‚ â€¢ History   â”‚  â”‚ â€¢ History   â”‚  â”‚ â€¢ Metrics   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚               â”‚               â”‚               â”‚               â”‚           â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                          â”‚               â”‚               â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    ðŸ” AUTH PROVIDER (AWS Cognito Client)                        â”‚ â”‚
â”‚  â”‚  â€¢ JWT Token Management  â€¢ Route Protection  â€¢ User Context                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚            ðŸ“¡ HTTPS/GraphQL              â”‚
                    â”‚                     â”‚                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           â˜ï¸ AWS AMPLIFY GEN 2 BACKEND                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                          ðŸ” AUTHENTICATION LAYER                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚
â”‚  â”‚  â”‚   Cognito       â”‚    â”‚   Identity      â”‚    â”‚      IAM        â”‚        â”‚  â”‚
â”‚  â”‚  â”‚   User Pool     â”‚    â”‚     Pool        â”‚    â”‚     Roles       â”‚        â”‚  â”‚
â”‚  â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚        â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Sign Up       â”‚â—„â”€â”€â–ºâ”‚ â€¢ AWS Creds    â”‚â—„â”€â”€â–ºâ”‚ â€¢ API Access    â”‚        â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Sign In       â”‚    â”‚ â€¢ Federation    â”‚    â”‚ â€¢ DB Access     â”‚        â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ JWT Tokens    â”‚    â”‚ â€¢ Temp Creds    â”‚    â”‚ â€¢ Lambda Exec   â”‚        â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                            ðŸ“Š API LAYER (AppSync)                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚
â”‚  â”‚  â”‚    GraphQL      â”‚    â”‚   REST API      â”‚    â”‚   Resolvers     â”‚        â”‚  â”‚
â”‚  â”‚  â”‚   Endpoint      â”‚    â”‚   Gateway       â”‚    â”‚                 â”‚        â”‚  â”‚
â”‚  â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚        â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Mutations     â”‚    â”‚ â€¢ /api/chat     â”‚    â”‚ â€¢ DynamoDB      â”‚        â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Queries       â”‚    â”‚ â€¢ /api/embed    â”‚    â”‚ â€¢ Lambda        â”‚        â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Subscriptions â”‚    â”‚ â€¢ /api/test     â”‚    â”‚ â€¢ Auth Rules    â”‚        â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                          âš¡ LAMBDA FUNCTIONS                                â”‚  â”‚
â”‚  â”‚                                                                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚        ðŸ¤– CHATBOT FUNCTION      â”‚  â”‚      ðŸ“ EMBEDDINGS FUNCTION     â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                 â”‚  â”‚                                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Input: User message + history   â”‚  â”‚ Input: User data (profile/logs) â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                 â”‚  â”‚                                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ 1. Validate request             â”‚  â”‚ 1. Validate data                â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ 2. Create query embedding       â”‚  â”‚ 2. Generate text content        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ 3. Search Pinecone vectors      â”‚  â”‚ 3. Create OpenAI embedding      â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ 4. Fetch DynamoDB data          â”‚  â”‚ 4. Store in Pinecone            â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ 5. Build context prompt         â”‚  â”‚ 5. Return success status        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ 6. Call OpenAI Chat API         â”‚  â”‚                                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ 7. Return AI response           â”‚  â”‚ Environment:                    â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                 â”‚  â”‚ â€¢ OPENAI_API_KEY               â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Environment:                    â”‚  â”‚ â€¢ PINECONE_API_KEY             â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ OPENAI_API_KEY               â”‚  â”‚ â€¢ PINECONE_INDEX_NAME          â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ PINECONE_API_KEY             â”‚  â”‚                                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ PINECONE_INDEX_NAME          â”‚  â”‚                                 â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                           ðŸ—„ï¸ DATABASE LAYER                                 â”‚  â”‚
â”‚  â”‚                                                                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚  â”‚
â”‚  â”‚  â”‚  UserProfile    â”‚  â”‚  WorkoutLog     â”‚  â”‚   MealLog       â”‚              â”‚  â”‚
â”‚  â”‚  â”‚     Table       â”‚  â”‚     Table       â”‚  â”‚    Table        â”‚              â”‚  â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ PK: id          â”‚  â”‚ PK: id          â”‚  â”‚ PK: id          â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ GSI: userId     â”‚  â”‚ GSI: userId     â”‚  â”‚ GSI: userId     â”‚              â”‚  â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ name          â”‚  â”‚ â€¢ type          â”‚  â”‚ â€¢ type          â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ age           â”‚  â”‚ â€¢ duration      â”‚  â”‚ â€¢ calories      â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ height        â”‚  â”‚ â€¢ calories      â”‚  â”‚ â€¢ foods         â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ weight        â”‚  â”‚ â€¢ notes         â”‚  â”‚ â€¢ notes         â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ goals         â”‚  â”‚ â€¢ exercises     â”‚  â”‚ â€¢ date          â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ restrictions  â”‚  â”‚ â€¢ date          â”‚  â”‚ â€¢ owner         â”‚              â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ owner         â”‚  â”‚ â€¢ owner         â”‚  â”‚                 â”‚              â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â”‚
â”‚  â”‚                                                                             â”‚  â”‚
â”‚  â”‚  Authorization: @auth(rules: [{ allow: owner }])                           â”‚  â”‚
â”‚  â”‚  Indexes: @index(name: "byUserId", fields: ["userId"])                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚                    â”‚                    â”‚
                     â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ðŸ¤– OpenAI API       â”‚  â”‚    ðŸŒ² Pinecone VectorDB â”‚  â”‚   ðŸ“Š External APIs     â”‚
â”‚                         â”‚  â”‚                         â”‚  â”‚                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   Chat Completion   â”‚ â”‚  â”‚ â”‚  fitness-assistant  â”‚ â”‚  â”‚ â”‚   Future Integrationsâ”‚ â”‚
â”‚ â”‚                     â”‚ â”‚  â”‚ â”‚      Index          â”‚ â”‚  â”‚ â”‚                     â”‚ â”‚
â”‚ â”‚ Model: gpt-3.5-turboâ”‚ â”‚  â”‚ â”‚                     â”‚ â”‚  â”‚ â”‚ â€¢ Nutrition APIs    â”‚ â”‚
â”‚ â”‚ Max Tokens: 500     â”‚ â”‚  â”‚ â”‚ Dimensions: 1536    â”‚ â”‚  â”‚ â”‚ â€¢ Wearable Devices  â”‚ â”‚
â”‚ â”‚ Temperature: 0.7    â”‚ â”‚  â”‚ â”‚ Metric: cosine      â”‚ â”‚  â”‚ â”‚ â€¢ Health Platforms  â”‚ â”‚
â”‚ â”‚                     â”‚ â”‚  â”‚ â”‚ Pod Type: Serverlessâ”‚ â”‚  â”‚ â”‚                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚                     â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                         â”‚  â”‚ â”‚ Namespaces:         â”‚ â”‚  â”‚                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”‚ â€¢ user-123          â”‚ â”‚  â”‚                         â”‚
â”‚ â”‚   Text Embeddings   â”‚ â”‚  â”‚ â”‚ â€¢ user-456          â”‚ â”‚  â”‚                         â”‚
â”‚ â”‚                     â”‚ â”‚  â”‚ â”‚ â€¢ user-789          â”‚ â”‚  â”‚                         â”‚
â”‚ â”‚ Model: ada-002      â”‚ â”‚  â”‚ â”‚                     â”‚ â”‚  â”‚                         â”‚
â”‚ â”‚ Dimensions: 1536    â”‚ â”‚  â”‚ â”‚ Vectors per user:   â”‚ â”‚  â”‚                         â”‚
â”‚ â”‚ Usage: RAG queries  â”‚ â”‚  â”‚ â”‚ â€¢ 1 Profile vector  â”‚ â”‚  â”‚                         â”‚
â”‚ â”‚ + Content embedding â”‚ â”‚  â”‚ â”‚ â€¢ N Workout vectors â”‚ â”‚  â”‚                         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚ â€¢ M Meal vectors    â”‚ â”‚  â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚                     â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ â”‚ Vector Structure:   â”‚ â”‚
                             â”‚ â”‚ {                   â”‚ â”‚
                             â”‚ â”‚   id: "user-type-uuid"â”‚ â”‚
                             â”‚ â”‚   values: [1536 dims]â”‚ â”‚
                             â”‚ â”‚   metadata: {       â”‚ â”‚
                             â”‚ â”‚     userId: "..."   â”‚ â”‚
                             â”‚ â”‚     type: "..."     â”‚ â”‚
                             â”‚ â”‚     content: "..."  â”‚ â”‚
                             â”‚ â”‚     timestamp: "..." â”‚ â”‚
                             â”‚ â”‚     ...custom_data  â”‚ â”‚
                             â”‚ â”‚   }                 â”‚ â”‚
                             â”‚ â”‚ }                   â”‚ â”‚
                             â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              ðŸ”„ RAG PIPELINE FLOW               â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    1. User Input          2. Authentication     3. Embedding Creation
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚"Suggest a   â”‚â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚Validate JWT â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚OpenAI       â”‚
   â”‚post-workout â”‚        â”‚Token &      â”‚       â”‚text-embeddingâ”‚
   â”‚meal"        â”‚        â”‚Get userId   â”‚       â”‚-ada-002     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                                       â–¼
    6. AI Response        5. Context Assembly   4. Vector Search
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚"Based on    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”‚Combine:     â”‚â—„â”€â”€â”€â”€â”€â”€â”‚Query        â”‚
   â”‚your last    â”‚        â”‚â€¢ DynamoDB   â”‚       â”‚Pinecone     â”‚
   â”‚workout..."  â”‚        â”‚â€¢ Pinecone   â”‚       â”‚Namespace    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚â€¢ User promptâ”‚       â”‚for topK=5   â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚             ðŸ’¾ DATA FLOW DIAGRAM                â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Profile Creation:
Frontend Form â†’ GraphQL Mutation â†’ DynamoDB â†’ Embedding API â†’ OpenAI â†’ Pinecone

Workout/Meal Logging:
Frontend Form â†’ GraphQL Mutation â†’ DynamoDB â†’ Embedding API â†’ OpenAI â†’ Pinecone

AI Chat Query:
Frontend Message â†’ Lambda Function â†’ [OpenAI + Pinecone + DynamoDB] â†’ AI Response

Analytics Dashboard:
Frontend Load â†’ GraphQL Query â†’ DynamoDB â†’ Metrics Calculation â†’ Chart Display
```

## ðŸ“ Pinecone Index Design

### Index Configuration
```yaml
Index Name: fitness-assistant
Dimensions: 1536 (OpenAI text-embedding-ada-002)
Metric: cosine
Environment: Serverless (AWS us-east-2)
```

### Namespace Strategy
```
User Isolation: namespace = userId
Vector IDs: {userId}-{type}-{uuid}
```

### Metadata Schema
```javascript
// Profile Vector
{
  userId: "user-123",
  type: "profile", 
  content: "User profile: John, 25 years old, 5'10\", 165 lbs...",
  timestamp: "2024-01-15T10:30:00Z",
  name: "John Doe",
  age: 25,
  fitnessGoals: "Build muscle and lose fat"
}

// Workout Vector  
{
  userId: "user-123",
  type: "workout",
  content: "User workout: Strength Training - 45 min, 350 cal...",
  timestamp: "2024-01-15T08:00:00Z", 
  workoutType: "Strength Training",
  duration: 45,
  calories: 350
}

// Meal Vector
{
  userId: "user-123", 
  type: "meal",
  content: "User meal: Grilled chicken with rice - 650 calories...",
  timestamp: "2024-01-15T12:00:00Z",
  mealType: "Lunch", 
  calories: 650,
  foods: "Grilled chicken, brown rice, vegetables"
}
```

## ðŸ”§ AWS Amplify Gen 2 Configuration

### Backend Categories
```typescript
// amplify/backend.ts
export const backend = defineBackend({
  auth,           // Cognito User Pool + Identity Pool
  data,           // DynamoDB + GraphQL API  
  embeddingsFunction,  // OpenAI + Pinecone integration
  chatbotFunction     // RAG-powered AI chat
});
```

### Authentication
```typescript
// amplify/auth/resource.ts
export const auth = defineAuth({
  loginWith: {
    email: true,
  },
  userAttributes: {
    email: { required: true },
  },
});
```

### Data Schema
```graphql
# amplify/data/resource.ts
type UserProfile @model @auth(rules: [{ allow: owner }]) {
  id: ID!
  userId: String! @index(name: "byUserId")
  name: String
  age: Int
  heightFeet: Int
  heightInches: Int  
  weight: Float
  fitnessGoals: String
  activityLevel: String
  dietaryRestrictions: String
}

type WorkoutLog @model @auth(rules: [{ allow: owner }]) {
  id: ID!
  userId: String! @index(name: "byUserId") 
  type: String!
  duration: Int
  calories: Int
  notes: String
  exercises: String
  date: String!
}

type MealLog @model @auth(rules: [{ allow: owner }]) {
  id: ID!
  userId: String! @index(name: "byUserId")
  type: String!
  calories: Int
  notes: String  
  foods: String
  date: String!
}
```

### Lambda Functions
```typescript
// amplify/functions/embeddings/resource.ts
export const embeddingsFunction = defineFunction({
  name: 'embeddings',
  entry: './handler.ts',
  environment: {
    OPENAI_API_KEY: process.env.OPENAI_API_KEY,
    PINECONE_API_KEY: process.env.PINECONE_API_KEY,
    PINECONE_INDEX_NAME: 'fitness-assistant',
  },
});
```

## ðŸ§ª Local Development & Deployment

### Prerequisites
```bash
# Required tools
node --version  # 18+
npm --version   # 9+

# Required accounts & keys
AWS Account (Free Tier)
OpenAI API Key:
Pinecone API Key (Free Tier)
```

### Environment Setup
```bash
# 1. Clone repository
git clone https://github.com/aka2066/Fitness-assistant-ai.git
cd Fitness-assistant-ai

# 2. Install dependencies  
npm install

# 3. Configure environment variables
touch .env.local
echo "OPENAI_API_KEY=your_openai_key_here" >> .env.local
echo "PINECONE_API_KEY=your_pinecone_key_here" >> .env.local
```

### Run Locally (Mock Backend)
```bash
# Start Amplify sandbox (creates local DynamoDB + Lambda)
npx ampx sandbox

# In separate terminal - start Next.js frontend  
npm run dev

# Access application
open http://localhost:3000
```

### Deploy to AWS
```bash
# Deploy to AWS Amplify
npx ampx sandbox --outputs-version 1

# Or deploy production environment
npx ampx pipeline deploy --branch main
```

### Test RAG System
```bash
# Test backend endpoints
curl -X POST http://localhost:3000/api/test-pinecone \
  -H "Content-Type: application/json" \
  -d '{"userId": "test-user"}'

# Run test suite
npm test
```

## âœ… Verification Checklist

- [ ] âœ… User can create profile â†’ Profile embedded in Pinecone
- [ ] âœ… User can log workouts â†’ Workout embedded in Pinecone  
- [ ] âœ… User can log meals â†’ Meal embedded in Pinecone
- [ ] âœ… AI chat retrieves personal context from Pinecone
- [ ] âœ… RAG responses reference user's actual data
- [ ] âœ… Progress analytics show real metrics
- [ ] âœ… All data isolated by user namespace
- [ ] âœ… Authentication protects all routes
- [ ] âœ… Tests pass for components and Lambda functions

**ðŸŽ¯ Assessment Complete: Full-stack RAG-powered fitness assistant with personalized AI coaching!** 
